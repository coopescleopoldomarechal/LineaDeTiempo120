<!doctype html>
<html lang="en" prefix="og: http://ogp.me/ns#">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- SEO -->
    <title>Escuela "Leopoldo Marechal" - 120* aniversario</title>
    <meta name="description" content="WebSlides is the easiest way to make HTML presentations, portfolios, and landings. Just essential features.">

    <!-- URL CANONICAL -->
    <!-- <link rel="canonical" href="http://your-url.com/"> -->

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,700,700i%7CMaitree:200,300,400,600,700&amp;subset=latin-ext" rel="stylesheet">

    <!-- CSS WebSlides -->
    <link rel="stylesheet" type='text/css' media='all' href="static/css/webslides.css">

    <!-- Optional - CSS SVG Icons (Font Awesome) -->
    <link rel="stylesheet" type='text/css' media='all' href="static/css/svg-icons.css">

    <!-- SOCIAL CARDS (ADD YOUR INFO) -->

    <!-- FACEBOOK -->
    <meta property="og:url" content="http://your-url.com/"> <!-- YOUR URL -->
    <meta property="og:type" content="article">
    <meta property="og:title" content="WebSlides — Making HTML Presentations Easy"> <!-- EDIT -->
    <meta property="og:description" content="WebSlides is about telling stories beautifully. Just the essential features. Good karma."> <!-- EDIT -->
    <meta property="og:updated_time" content="2017-01-04T17:20:50"> <!-- EDIT -->
    <meta property="og:image" content="static/images/share-webslides.jpg"> <!-- EDIT -->

    <!-- TWITTER -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@webslides"> <!-- EDIT -->
    <meta name="twitter:creator" content="@jlantunez"> <!-- EDIT -->
    <meta name="twitter:title" content="WebSlides — Making HTML Presentations Easy"> <!-- EDIT -->
    <meta name="twitter:description" content="WebSlides is about good karma. Just essential features. 120+ free slides ready to use."> <!-- EDIT -->
    <meta name="twitter:image" content="static/images/share-webslides.jpg"> <!-- EDIT -->

    <!-- FAVICONS -->
    <link rel="shortcut icon" sizes="16x16" href="static/images/favicons/favicon.png">
    <link rel="shortcut icon" sizes="32x32" href="static/images/favicons/favicon-32.png">
    <link rel="apple-touch-icon icon" sizes="76x76" href="static/images/favicons/favicon-76.png">
    <link rel="apple-touch-icon icon" sizes="120x120" href="static/images/favicons/favicon-120.png">
    <link rel="apple-touch-icon icon" sizes="152x152" href="static/images/favicons/favicon-152.png">
    <link rel="apple-touch-icon icon" sizes="180x180" href="static/images/favicons/favicon-180.png">
    <link rel="apple-touch-icon icon" sizes="192x192" href="static/images/favicons/favicon-192.png">

    <!-- Android -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#333333">

    <!-- Vue/Axios-->
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

  </head>
  <body>
    <header role="banner">
      <nav role="navigation">
        <p class="logo"><a href="index.html" title="WebSlides">WebSlides</a></p>
        <ul>
          <li class="github">
            <a rel="external" href="https://github.com/webslides/webslides" title="Github">
              <svg class="fa-github">
                <use xlink:href="#fa-github"></use>
              </svg>
              <em>WebSlides</em>
            </a>
          </li>
          <li class="twitter">
            <a rel="external" href="https://twitter.com/webslides" title="Twitter">
              <svg class="fa-twitter">
                <use xlink:href="#fa-twitter"></use>
              </svg>
              <em>@WebSlides</em>
            </a>
          </li>
          <!--  <li class="dribbble"><a rel="external" href="http://dribbble.com/webslides" title="Dribbble"><svg class="fa-dribbble"><use xlink:href="#fa-dribbble"></use></svg> <em>webslides</em></a></li> -->
        </ul>
      </nav>
    </header>

    <main role="main" id="app">
      <article id="webslides" class="vertical">
        <!-- Quick Guide
          - Each parent <section> in the <article id="webslides"> element is an individual slide.
          - Vertical sliding = <article id="webslides" class="vertical">
          - <div class="wrap"> = container 90% / <div class="wrap size-50"> = 45%;
        -->
        <template v-for="(infoSlider, index) in $data.infoSliders" >
          <slider :slider = "infoSlider" :idx = index />
        </template>
        
      </article>
      <!-- end article -->
    </main>
    <!-- end main -->

     <footer role="contentinfo">
      <div class="wrap">
        <p><img src="static/sliders/logo marechal.jpg" alt="logo marechal" /></p> 
      </div>
    </footer> 

    <!-- Required -->
    <script src="static/js/webslides.js"></script>
    <!-- OPTIONAL - svg-icons.js (fontastic.me - Font Awesome as svg icons) -->
    <script defer src="static/js/svg-icons.js"></script>

  </body>
  <style>
       
	.bg-t, .bg-t:before{content: " ";
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: rgba(241, 175, 100, 0.2);
        }


  </style>
  <script>
    Vue.component('slider', {
        props: ['slider', 'idx'],
        template: `<section> 
                    <span class="background bg-t" :style="backgroundImg()"></span>
                        <div :class="getTransition( idx + 1)">
                          <h1><span :style="buildStyle(idx)">&nbsp;{{slider.date}}&nbsp;</span></h1>
                          <h2><span :style="buildStyle(idx)">&nbsp;{{slider.title}} #{{idx + 1}}&nbsp;</span></h2>
                          <p><span :style="buildStyle(idx)">&nbsp;{{slider.description}}&nbsp;</span></p>
                        </div>
                  </section>`,
        methods: {
          backgroundImg : function(){
            var dirStatics = "static/sliders/img/";
            var imgBg = this.slider.backgroundImg;
            if( imgBg.startsWith( 'http'))
              return  "background-image:url(" + imgBg + ")";
            else
              return  "background-image:url( '" + dirStatics + imgBg + "');background-color:rgb(153, 153, 255,.9) ";
          },
          getTransition : function( idx ){
            var transition = [ "fadeIn", "fadeInUp", "zoomIn", "slideInLeft", "slideInRight" ];
            return 'wrap ' + transition[idx % 5];// + " slow";
          },
          buildStyle : function(idx){
             var color = this.getPalette()[idx % 6]; 
             return "background-color: rgb(" + color[0] + "," + color[1] + "," + color[2] + ", .8 ); color:" + color[3] + ";";
          },
          getPalette : function(){  
            return [
                  [218, 247, 166, "#000000"],
                  [255, 195, 0, "#000000"],
                  [255, 87, 51, "#000000"],
                  [199, 0, 57, "#FFFFFF"],
                  [144, 12, 63, "#FFFFFF"],
                  [88, 24, 69, "#FFFFFF"]
              ];
          }
        }
     })

    new Vue({
        el: '#app',
        component: "slider",
        data:  function()  {
           return { infoSliders : [  //type, options, content
              /*{
                title : "slider",
                year: 1899,
                backgroundImg : "https://source.unsplash.com/nwfuaYecNUs/"
              },
              {
                title : "slider",
                year: 1952,
                backgroundImg : "https://source.unsplash.com/IUn1O500LMI/"
              },
              {
                title : "slider",
                year: 1994,
                backgroundImg : "https://source.unsplash.com/nwfuaYecNUs/"
              }*/
            ]};
          },
          mounted: function () {

            //https://spreadsheets.google.com/feeds/list/1muIEfdY_xGbPROvxe8Ru8tYr7H4kMXqvLLVDJ7GifxI/1/public/values?alt=json
            var key = '1XLV88U975x61c6nv8whpHZadGsmxAiZoJWEMsNuuVAw';
            var urlTemplate = 'https://spreadsheets.google.com/feeds/list/PUT-KEY-HERE/1/public/values?alt=json'
            var urlSpreadsheet =  urlTemplate.replace('PUT-KEY-HERE',key);
            console.log(urlSpreadsheet);
            
            axios.get(urlSpreadsheet).then((response) => {
                  console.log( response.data.feed.entry);
                  var entries =  response.data.feed.entry;
                  entries.forEach(element => {
                    this.infoSliders.push( new infoSlider().fill(element)); 
                    console.log();
                  });
  
            this.$nextTick(() => {
                  window.ws = new WebSlides({ autoslide: 8000 });  
              });
            })  
          }
      })

      function getValue( element, token){
         var p = "gsx$" + token;
         console.log(p);
         return element[p]['$t'];
      }

      class infoSlider {
        constructor() {
           this.id = 0;
           this.title = "";
           this.description = "";
           this.year =  1899;
           this.backgroundImg = "";
           this.autor = "";
           this.alcance = "Nacional";
           this.date = "01/01/1899";
           this.isBW = true;
        }

        fill( element) {
          this.id =  getValue(element, 'marcatemporal');
          this.title =  getValue(element, 'nombredelevento');
          this.autor =  getValue(element, 'tunombre') + '-' + getValue(element, 'gradosalademihijao');
          this.backgroundImg =  getValue(element, 'imagenasociada');
          this.description =  getValue(element, 'descripcióndelevento');
          this.alcance = getValue(element, 'alcancedelevento');
          this.date = getValue(element, 'fechadelevento');
          this.year = new Date( this.date).getFullYear();
          return this;
        }
      }
  </script>
</html>
